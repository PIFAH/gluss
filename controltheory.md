---
layout: default
title: Control Theory
---

# A Control Theory for the Tetrobot/Gluss System

CAUTION: These are preliminary loose thoughts, and probably wrong and confused.  However, at Public Invention
we have a best practice of working "in the light", so we (well, just Rob really), are making this avaialable
as a work in progress.

On a more positive note, this is serious math. I consider this PhD level work (not in a math department,
but in robotics in an Electrical Engineering or Computer Science department.)

## Goal

The basic goal is to describe and design poses and motion of a robotic system completely independent of
the details of the geometry of the robot.  For example, we would like to develop an "inchworming" motion
based on changing the curvature of a "tentacle" (mathematically just a space curve), and have this
accomplish locomotion whether we use the "program" resulting from it on a 7-Tetrahedron Tetrobot or
17-Tetrahedron Tetrobot.

Since the "tentacle" and "surface" are the two structures generated by the "Octet" geometry, it make
sense to work with both of these, although at present the 7-Tet Tetrobot/Glussbot only exists
in the "tentacle" configuration.

By divorcing the design of motion from the specifics of the robot structure, we come closer to the
ideal of creating "gluss" as a metamorphic material.

## Preliminaries

To understand this, you should review:
* The current status of the Tetrobot/Glussbot.
* Very basic Wavelet Theory.
* Very basic Differential Geometry.
I don't claim to have mastered wavelet theory, and have only scratched the surface of differential geometry
at tht time of this writing.

## Basic Idea

We really want to create a mathematical machinery, which I will loosely call the "wiggle space" for defining
how the Tetrobot can wiggle indpendent of the Tetrahedral/Octahedral geometry. This machinery should
allow us to design motion without choosing a particular specific robot configuration.  For example,
we want to design a gait to:
* Walk on a plane.
* Crawl over a log.
* Climb stairs.
* Climb up a tree.
We want all of these "gaits" to work with various candidate geometries. For example, so suppose our
robot is 9 Tetrahedra organized into a tetrahelix (that is, a linear tentacle.) We would like to take
our "wiggle space gait" and allow us to move across the earth and crawl over a log. (We are not at
present interested in how to figure out a log is in the way; we assume a work person can identify
that and order the robot to go into "climb over a log" mode. It would be enormously advantageous
if this gait would work when the robot is fully functional, and that we could use the SAME gait
in the wiggle space to climb over the log if we determine that a few of our actuators are broken
and stuck.

It seems the most useful mathematical tool for developing such gaits is the wavelet. The basic
idea of the wavelet is that it is limited in both frequency and time, unlike the Fourier transform
which gives a frequency decomposition of a signal but is not limited in time in any useful sense.
Wavelets are inherement multi-resolution, which seems particular useful for this domain.

So fundementally, we want a pose to be a set of wavelets.  By adding additional wavelets we make
the pose more precisely what we want.  However, there are many ways to define wavelets and
apply them to this domain.

I propose we investigate defining wavelets not on space, but on curvature of a space curve. That is,
as we add wavelets, we make the curve in space (3-space) more complex. If we attempt to define
wavelets on displacement in space, we can never describe a spiral that performs a full revolution,
for example. (And, we will want that for wrapping a tree branch, for example.)

A repeatble series of poses is a "gait".  We want to make sure our system can conveniently
describe gaits as well as poses.  This seems to imply changes across time. Waveletes do this
well for one dimension; if I am not mistaken and we can generalize the point to defining
changes to curvature and dilation with waveletes, then we sould have a powerful-enough
theory for what we want.

# Mathematical Goals

We would like to be able to prove candidate theorems of the form (note this is just and example):

> Completness Theorem: Given the Wiggle Space as defined above, every configuration of
> the N-Tet Tetrahelix Robot can be reached with enough wavelets in the Wiggle Space.

Ideally, we would have a Composition Theorem: Any two gaits can be combined (added) to
produce a potentially useful gait.  For example, we would like to be able to walk,
and we would like the head of the robot to stay off the ground (perhaps because it
is holding an injured human being.)  We would like a way to compose a "crawl on the 
ground gait" with a "hold your head up" pose to successfully rescue the human being.

# What We Could Try

We will parametrize the curve on the space [0..1]. Then we will try to define
the curvature of the curve by a wavelet. If we were operating on the physical displacement,
we would want to use a differnetiable wavelet like the Ricker Wavelet (also called
the Mexican Hat wavelet).  However, by operating directly on the curvature, it
is somewhat analysis to apply force to a particle.  The force need not be differentiable
to keep the physical path in 3-space smooth. Therefore it seems reasonable to use
a simple "square wave" Haar wavelet.


We could then map a tetrahelix onto such a curve by placing the N-nodes at evenly
space 1/Nth intervals.  The curve evaluated at these N points gives us N
points in 3-Space.  We then "rig" an N-tet Tetrobot so that the centroids
of each of the N tetrahedra is rigged to the points.  Then we define an error
function to be the square of the distance, and use a simply hill-climbing optimization
to find the actuator lengths that minimize this error function.

If we have all of this machinery, we could work in the other direction: start with
a physcial robot model and seek to find a wiggle space wavelet set that minimizes
the error function.

# How the Programming of This Would Work

This is probably worth creating a separate program just to deal with this.

We would need 3D visualization machinery to render and understand the Ricker
wavelets treated as curvature.

As a mathamatical test, we could create a space curve with splines, and
see a wavelet decomposition with low error.  (This could be done in
computer code; as a separate operation, a mathematician could investigate
whether one can always a produce a perfect wavelet decomposition for a spline.)

I personally would try to do that with the ability to render space curves
with a computer to back me up.

Then we need to get a simple optimization engine, probably some sort
of hill-climbing with simulated annealing.

We would then try to map an ideal tetrahelix to the curve with the
optimization engine.

(Note: I cam currently using the Ammo.js physics engine.  In a very
real sense, it IS just can optimization engine.  However, it brings
solid modelling, gravity, velocity, etc. to the table.  I would
not want to complicate the development of the mathematics with
that until the final step (where we truly are simulation the physical
robot, as we are now.))
